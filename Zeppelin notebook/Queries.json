{"paragraphs":[{"text":"%md\n# Projet GDELT - Script ETL - janvier 2020\n#### Auteur : Camille COCHENER, Sophie LEVEUGLE, Romain LEGRAND, Rodolphe SIMONEAU, Hamza AMRI\n\n### *Partie 3 : Réponses aux problématiques*","user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Projet GDELT - Script ETL - janvier 2020</h1>\n<h4>Auteur : Camille COCHENER, Sophie LEVEUGLE, Romain LEGRAND, Rodolphe SIMONEAU, Hamza AMRI</h4>\n<h3><em>Partie 3 : Réponses aux problématiques</em></h3>\n</div>"}]},"apps":[],"jobName":"paragraph_1579794116985_755586370","id":"20200122-212411_1685318918","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:262"},{"text":"%md\n*REQUETE 1* : Afficher le nombre d’articles/évènements qu’il y a eu pour chaque triplet (jour, pays de l’évènement, langue de l’article).\n","user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p><em>REQUETE 1</em> : Afficher le nombre d’articles/évènements qu’il y a eu pour chaque triplet (jour, pays de l’évènement, langue de l’article).</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1579794116985_1179583894","id":"20200122-212429_307824891","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:263"},{"text":"//REQUETE 1\nz.show(spark.sql(\"\"\"SELECT globaleventid, nombre_articles \n                    FROM vue_req1 \n                    WHERE day_mention=\"20191201\" \n                    AND actioncountry=\"US\"\n                    AND language=\"eng\"\n                    LIMIT 10\"\"\"))","user":"anonymous","dateUpdated":"2020-01-23T17:13:31+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"globaleventid":"string","nombre_articles":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"scatterChart":{"size":{"name":"nombre_articles","index":1,"aggr":"sum"},"group":{"name":"globaleventid","index":0,"aggr":"sum"}}},"keys":[{"name":"globaleventid","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"nombre_articles","index":1,"aggr":"sum"}],"commonSetting":{}},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"globaleventid\tnombre_articles\n890031666\t1\n890062419\t4\n890086695\t1\n890106094\t1\n890037538\t1\n890128508\t1\n890034976\t1\n890098401\t4\n890099779\t3\n890064128\t1\n"},{"type":"TEXT","data":""}]},"apps":[],"jobName":"paragraph_1579794116985_2054994122","id":"20200122-212439_776968853","dateCreated":"2020-01-23T15:41:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:264","dateFinished":"2020-01-23T15:42:09+0000","dateStarted":"2020-01-23T15:42:03+0000"},{"text":"%md \n*REQUETE 2* : Pour un pays donné en paramètre, afficher les évènements qui y ont eu lieu triés par le nombre de mentions (tri décroissant); permetter une agrégation par jour/mois/année","user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p><em>REQUETE 2</em> : Pour un pays donné en paramètre, afficher les évènements qui y ont eu lieu triés par le nombre de mentions (tri décroissant); permetter une agrégation par jour/mois/année</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1579794116986_1658812242","id":"20200122-212454_4353064","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:265"},{"text":"//REQUETE 2\nz.show(spark.sql(\"\"\"SELECT *\n                    FROM vue_req2\n                    WHERE actioncountry=\"US\"\n                    ORDER BY nombre_mentions DESC     \n                    LIMIT 10\"\"\"))","user":"anonymous","dateUpdated":"2020-01-23T15:43:41+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"day_event":"string","actioncountry":"string","globaleventid":"string","nombre_mentions":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"day_event\tactioncountry\tglobaleventid\tnombre_mentions\n20191201\tUS\t890039636\t521\n20191201\tUS\t890018711\t262\n20191201\tUS\t890061047\t255\n20191201\tUS\t890019791\t219\n20191201\tUS\t890030335\t215\n20191201\tUS\t890022498\t208\n20191201\tUS\t890022177\t208\n20191201\tUS\t890023600\t208\n20191201\tUS\t890023542\t208\n20191201\tUS\t890022494\t208\n"},{"type":"TEXT","data":""}]},"apps":[],"jobName":"paragraph_1579794116986_544801","id":"20200122-212503_1363594883","dateCreated":"2020-01-23T15:41:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:266","dateFinished":"2020-01-23T15:43:52+0000","dateStarted":"2020-01-23T15:43:41+0000"},{"text":"%md\n*REQUETE 3* : \nPour une source de donnés passée en paramètre (gkg.SourceCommonName), afficher les thèmes, personnes, lieux dont les articles de cette sources  parlent, ainsi que le nombre d’articles et le ton moyen des articles (pour chaque thème/personne/lieu); permetter une agrégation par jour/mois/année.","user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p><em>REQUETE 3</em> :<br/>Pour une source de donnés passée en paramètre (gkg.SourceCommonName), afficher les thèmes, personnes, lieux dont les articles de cette sources parlent, ainsi que le nombre d’articles et le ton moyen des articles (pour chaque thème/personne/lieu); permetter une agrégation par jour/mois/année.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1579794116986_-931727993","id":"20200122-212515_38139905","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:267"},{"text":"//REQUETE 3 PERSONS\nz.show(spark.sql(\"\"\"SELECT src_name,\n                           persons_2,\n                           nombre_articles,\n                           ton_moyen\n                    FROM vue_req3_persons\n                    WHERE src_name = \"ouest-france.fr\"\n                    LIMIT 50\"\"\"))","user":"anonymous","dateUpdated":"2020-01-23T15:50:42+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"src_name":"string","persons_2":"string","nombre_articles":"string","ton_moyen":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579794116986_-1618018975","id":"20200122-212552_1542700505","dateCreated":"2020-01-23T15:41:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:268","dateFinished":"2020-01-23T15:50:41+0000","dateStarted":"2020-01-23T15:50:31+0000","results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"src_name\tpersons_2\tnombre_articles\tton_moyen\nouest-france.fr\tcross a ford\t2\t-4.7244094488189\n"},{"type":"TEXT","data":""}]}},{"user":"anonymous","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"src_name":"string","locations_2":"string","nombre_articles":"string","ton_moyen":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579794296229_1497311220","id":"20200123-154456_1700808343","dateCreated":"2020-01-23T15:44:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5641","text":"//REQUETE 3 LOCATIONS\nz.show(spark.sql(\"\"\"SELECT src_name,\n                           locations_2,\n                           nombre_articles,\n                           ton_moyen\n                    FROM vue_req3_locations\n                    WHERE src_name = \"ouest-france.fr\"\n                    LIMIT 50\"\"\"))","dateUpdated":"2020-01-23T15:52:04+0000","dateFinished":"2020-01-23T15:52:03+0000","dateStarted":"2020-01-23T15:51:53+0000","results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"src_name\tlocations_2\tnombre_articles\tton_moyen\nouest-france.fr\t4#Flers, Nord-Pas-De-Calais, France#FR#FRB4#50.6333#3.13333#-1427027\t2\t-4.03225806451613\n"},{"type":"TEXT","data":""}]}},{"user":"anonymous","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"src_name":"string","themes_2":"string","nombre_articles":"string","ton_moyen":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579794315676_-1233431120","id":"20200123-154515_2095171613","dateCreated":"2020-01-23T15:45:15+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:6760","text":"//REQUETE 3 THEMES\nz.show(spark.sql(\"\"\"SELECT src_name,\n                           themes_2,\n                           nombre_articles,\n                           ton_moyen\n                    FROM vue_req3_themes\n                    WHERE src_name = \"ouest-france.fr\"\n                    LIMIT 50\"\"\"))","dateUpdated":"2020-01-23T15:53:04+0000","dateFinished":"2020-01-23T15:53:02+0000","dateStarted":"2020-01-23T15:53:01+0000","results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"src_name\tthemes_2\tnombre_articles\tton_moyen\nouest-france.fr\tSOVEREIGNTY\t2\t-6.08465608465608\n"},{"type":"TEXT","data":""}]}},{"text":"%md\n*REQUETE 4* : \nDresser la cartographie des relations entre les pays d’après le ton des articles : pour chaque paire (pays1, pays2), calculer le nombre\nd’article, le ton moyen (aggrégations sur Année/Mois/Jour, filtrage par pays ou carré de coordonnées)","user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p><em>REQUETE 4</em> :<br/>Dresser la cartographie des relations entre les pays d’après le ton des articles : pour chaque paire (pays1, pays2), calculer le nombre<br/>d’article, le ton moyen (aggrégations sur Année/Mois/Jour, filtrage par pays ou carré de coordonnées)</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1579794116986_406417526","id":"20200122-212530_257396387","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:269"},{"text":"//REQUETE 4\nz.show(spark.sql(\"\"\"SELECT day, actor1country, actor2country, nbarticles, avgtone\n                    FROM vue_req4\n                    WHERE actor1country != actor2country\n                    LIMIT 10\"\"\"))","user":"anonymous","dateUpdated":"2020-01-23T15:58:04+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"day":"string","actor1country":"string","actor2country":"string","nbarticles":"string","avgtone":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"day\tactor1country\tactor2country\tnbarticles\tavgtone\n20191201\tKOR\tKWT\t2\t6.53266331658287\n20191201\tKOR\tMKD\t4\t-2.29885057471264\n20191201\tKOR\tMLT\t12\t-3.8142689301954102\n20181201\tKOR\tMYS\t3\t3.1645569620253204\n20191201\tKOR\tOMN\t16\t-3.769792606737465\n20181201\tKOR\tPRK\t2\t-3.96270396270397\n20191101\tKOR\tPRK\t6\t0.0\n20191201\tKOR\tPRK\t70\t-2.9883154265320777\n20191201\tKOR\tRUS\t2\t-6.58914728682171\n20191101\tKOR\tSEA\t16\t-1.1830658725563175\n"},{"type":"TEXT","data":""}]},"apps":[],"jobName":"paragraph_1579794116986_-311317249","id":"20200122-212547_494049766","dateCreated":"2020-01-23T15:41:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:270","dateFinished":"2020-01-23T15:58:02+0000","dateStarted":"2020-01-23T15:58:02+0000"},{"user":"anonymous","dateUpdated":"2020-01-23T15:41:56+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579794116986_1351103903","id":"20200123-101131_883485742","dateCreated":"2020-01-23T15:41:56+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:271"}],"name":"Queries","id":"2F1JFJH4W","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}